{"remainingRequest":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/src/views/login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/src/views/login.vue","mtime":1580137040823},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js","mtime":1574737707076},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js","mtime":1574737715182},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/vue-loader/lib/index.js","mtime":1581426799590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyByZWYsIGNyZWF0ZUNvbXBvbmVudCwgUmVmLCBvbk1vdW50ZWQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IEVsRm9ybSB9IGZyb20gJ2VsZW1lbnQtdWkvdHlwZXMvZm9ybSc7CmltcG9ydCB7IHVzZUxvYWRpbmcgfSBmcm9tICd3ZWItdG9vbGtpdC9zcmMvc2VydmljZSc7CmltcG9ydCB7IHBvc3RTZXJ2aWNlLCBzdG9yZVVzZXJJbmZvLCB1cGRhdGVTdG9yZVVzZXJJbmZvIH0gZnJvbSAnd2ViLXRvb2xraXQvc3JjL2Nhc2UtbWFpbic7CmltcG9ydCB7bG9naW5UaXRsZTEsIGxvZ2luVGl0bGUyLCBsb2dpbkxvZ28sIHVybE1hcCwgc2NoZW1lfSBmcm9tICdAL2NvbmZpZyc7CmltcG9ydCB7cm91dGVyfSBmcm9tICdAL21haW4nOwppbXBvcnQgeyBSb3V0ZSB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQge2Fzc2VydH0gZnJvbSAnd2ViLXRvb2xraXQvc3JjL3V0aWxzL2luZGV4JzsKZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHsKICBzZXR1cCgpIHsKICAgIGNvbnN0IGxvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgY29uc3QgZm9ybSA9IHJlZih7IHVzZXJuYW1lOiAnJywgcHdkOiAnJyB9KTsKICAgIGNvbnN0IGZvcm1SZWY6IFJlZjxFbEZvcm18bnVsbD4gPSByZWYobnVsbCk7CiAgICBjb25zdCBydWxlID0gewogICAgICB1c2VybmFtZTogewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnnlKjmiLflkI0nLAogICAgICAgIHRyaWdnZXI6ICdub25lJywKICAgICAgfSwKICAgICAgcHdkOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnlr4bnoIEnLAogICAgICAgIHRyaWdnZXI6ICdub25lJywKICAgICAgfSwgewogICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgIG1pbjogNiwKICAgICAgICBtZXNzYWdlOiAn5a+G56CB6ZW/5bqm5LiN6IO95bCP5LqONuS9jScsCiAgICAgICAgdHJpZ2dlcjogJ25vbmUnLAogICAgICB9XSwKICAgIH07CiAgICBhc3luYyBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgY29uc3QgdmFsaWQgPSBhd2FpdCAoZm9ybVJlZi52YWx1ZSBhcyBFbEZvcm0pLnZhbGlkYXRlKCk7CiAgICAgIGFzc2VydCh2YWxpZCk7CiAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IHBvc3RTZXJ2aWNlKHVybE1hcC5sb2dpbkNvbW1vbi51cmwsIHsKICAgICAgICAuLi5mb3JtLnZhbHVlLAogICAgICAgIHNjaGVtYTogc2NoZW1lLAogICAgICB9KTsKICAgICAgdXBkYXRlU3RvcmVVc2VySW5mbyhkYXRhKTsKICAgICAgLy8g6K6+572u55m75b2V5ZCO5Zue5Yiw55m75b2V5YmN6aG16Z2iCiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgY29uc3QgcmVkaXJlY3Q6IFJvdXRlID0gewogICAgICAgIG5hbWU6ICdpbmRleCcsCiAgICAgICAgcXVlcnk6IHt9LAogICAgICB9OwogICAgICBpZiAoCiAgICAgICAgc3RvcmVVc2VySW5mby5yZWRpcmVjdCAmJgogICAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QubmFtZSAmJgogICAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QubmFtZSAhPT0gJ25vdEZvdW5kJyAmJgogICAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QubmFtZSAhPT0gJ2xvZ2luJwogICAgICApIHsKICAgICAgICByZWRpcmVjdC5uYW1lID0gc3RvcmVVc2VySW5mby5yZWRpcmVjdC5uYW1lOwogICAgICAgIHJlZGlyZWN0LnF1ZXJ5ID0gc3RvcmVVc2VySW5mby5yZWRpcmVjdC5xdWVyeTsKICAgICAgfQogICAgICAvLyBAdHMtaWdub3JlCiAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QgPSByZWRpcmVjdDsKICAgICAgcm91dGVyLnB1c2gocmVkaXJlY3QpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZm9ybVJlZiwgbG9naW5UaXRsZTEsIGxvZ2luVGl0bGUyLCBsb2dpbkxvZ28sCiAgICAgIGxvYWRpbmcsIGZvcm0sIHJ1bGUsIGxvZ2luOiB1c2VMb2FkaW5nKGxvYWRpbmcsIGxvZ2luKSwKICAgIH07CiAgfSwKfSk7Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"flex column center login-wrapper\" v-loading=\"loading\">\n    <div class=\"login-underlay\">\n      <div>\n        <img :src=\"loginLogo\" style=\"height: 7vh;padding: 10px 0 0 20px\" />\n      </div>\n      <div class=\"flex align-center\" style=\"width: 100%; height: 70vh; margin-top: -4vh\">\n        <div class=\"login-title flex column center\">\n          <div class=\"title1\">{{loginTitle1}}</div>\n          <div class=\"title2\">{{loginTitle2}}</div>\n        </div>\n        <el-form hide-required-asterisk class=\"login-body vivify popIn flex column around\" ref=\"formRef\" :model=\"form\" :rules=\"rule\">\n          <el-form-item prop=\"username\">\n            <label>用户名</label>\n            <input v-model=\"form.username\" autofocus autocomplete=\"off\" placeholder=\"用户名\" @keyup.enter=\"login($refs.formRef)\" />\n          </el-form-item>\n          <input class=\"login-fake-autocomplete\" tabindex=\"-1\" type=\"text\">\n          <input class=\"login-fake-autocomplete\" tabindex=\"-1\" type=\"password\">\n          <el-form-item prop=\"pwd\">\n            <label>密 码</label>\n            <input type=\"password\" autocomplete=\"off\" v-model=\"form.pwd\" placeholder=\"密  码\" @keyup.enter=\"login($refs.formRef)\" />\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"login($refs.formRef)\">登录</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n    <div class=\"login-support\">技术支持：杭州领克信息科技有限公司</div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { ref, createComponent, Ref, onMounted } from '@vue/composition-api';\nimport { ElForm } from 'element-ui/types/form';\nimport { useLoading } from 'web-toolkit/src/service';\nimport { postService, storeUserInfo, updateStoreUserInfo } from 'web-toolkit/src/case-main';\nimport {loginTitle1, loginTitle2, loginLogo, urlMap, scheme} from '@/config';\nimport {router} from '@/main';\nimport { Route } from 'vue-router';\nimport {assert} from 'web-toolkit/src/utils/index';\nexport default createComponent({\n  setup() {\n    const loading = ref(false);\n    const form = ref({ username: '', pwd: '' });\n    const formRef: Ref<ElForm|null> = ref(null);\n    const rule = {\n      username: {\n        required: true,\n        message: '请填写用户名',\n        trigger: 'none',\n      },\n      pwd: [{\n        required: true,\n        message: '请填写密码',\n        trigger: 'none',\n      }, {\n        type: 'string',\n        min: 6,\n        message: '密码长度不能小于6位',\n        trigger: 'none',\n      }],\n    };\n    async function login() {\n      const valid = await (formRef.value as ElForm).validate();\n      assert(valid);\n      const {data} = await postService(urlMap.loginCommon.url, {\n        ...form.value,\n        schema: scheme,\n      });\n      updateStoreUserInfo(data);\n      // 设置登录后回到登录前页面\n      // @ts-ignore\n      const redirect: Route = {\n        name: 'index',\n        query: {},\n      };\n      if (\n        storeUserInfo.redirect &&\n        storeUserInfo.redirect.name &&\n        storeUserInfo.redirect.name !== 'notFound' &&\n        storeUserInfo.redirect.name !== 'login'\n      ) {\n        redirect.name = storeUserInfo.redirect.name;\n        redirect.query = storeUserInfo.redirect.query;\n      }\n      // @ts-ignore\n      storeUserInfo.redirect = redirect;\n      router.push(redirect);\n    }\n    return {\n      formRef, loginTitle1, loginTitle2, loginLogo,\n      loading, form, rule, login: useLoading(loading, login),\n    };\n  },\n});\n</script>\n<style lang=\"scss\" scoped>\n.login-wrapper {\n  position: relative;\n  /*background-color: #334156;*/\n  background-color: #6499e8;\n  width: 100vw;\n  height: 100vh;\n}\n.login-underlay {\n  /*background-color: #4a5166;*/\n  background-color: rgba(48, 62, 67, 0.84);\n  border-radius: 10px;\n  box-shadow: 3px 3px 10px rgba($color: #000000, $alpha: .3);\n  width: 70vw;\n  height: 75vh;\n}\n.login-title{\n  color: #0297ff;\n  font-size: 3rem;\n  text-align: center;\n  margin-bottom: 25px;\n  font-weight: 400;\n  margin-left: 15%;\n  margin-right: 15%;\n  .title2 {\n    font-size: 2.5rem;\n  }\n}\n.login-body {\n  background: #525050;\n  padding: 5% 7%;\n  box-shadow: 3px 3px 10px rgba($color: #000, $alpha: .5);\n  border-radius: 10px;\n  width: 30vw;\n  max-width: 30rem;\n  height: 50vh;\n  max-height: 40rem;\n  border: none;\n  margin-right: -40%;\n  font-size: 1rem;\n  .login-fake-autocomplete {\n    width: 0;\n    height: 0;\n    border: none;\n    position: absolute;\n  }\n  .el-form-item {\n    label {\n      font-size: 1.05rem;\n      color: #fff;\n    }\n    input {\n      font-size: 1rem;\n      display: block;\n      letter-spacing: 1px;\n      width: 100%;\n      border: none;\n      border-bottom: 1px solid #fff;\n      line-height: 2rem;\n      background-color: transparent;\n      color: #fff;\n    }\n  }\n  .el-button{\n    width: 100%;\n    font-weight: 600;\n  }\n}\n.login-support{\n  color: #fff;\n  width: 100%;\n  position: absolute;\n  bottom: 10px;\n  font-weight: 700;\n  font-size: 1.05rem;\n  text-align: center;\n}\n</style>\n"]}]}