{"remainingRequest":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js??ref--13-2!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/request/index.ts","dependencies":[{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/request/index.ts","mtime":1579004471000},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js","mtime":1574737707076},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js","mtime":1574737715182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveWNqL1dlYnN0b3JtUHJvamVjdHMvbHR0UHJvamVjdHMvdGVhY2gtcGxhdGZvcm0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBzbGVlcCwgaXNVbmRlZmluZWQgfSBmcm9tICcuLi8uLi91dGlscyc7CmltcG9ydCBRcyBmcm9tICdxcyc7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHByb2Nlc3MuZW52LlZVRV9BUFBfVEVTVF9CQVNFX1VSTCA6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkw7CmV4cG9ydCB2YXIgQ2FuY2VsVG9rZW5Tb3VyY2VzID0gW107Ci8qKgogKiBAcGFyYW0gdXJsIHJlcXVlc3QgdXJsCiAqIEBwYXJhbSBwYXlsb2FkIHJlcXVlc3QgYm9keSBwYXJhbXMKICogQHBhcmFtIHF1ZXJ5IHVybCBwYXJhbXMKICogQHBhcmFtIGNvbmZpZyBhY3Rpb24gY29uZmlndXJhdGlvbgogKi8KCmV4cG9ydCB2YXIgcG9zdFNlcnZpY2UgPSBmdW5jdGlvbiBwb3N0U2VydmljZSh1cmwpIHsKICB2YXIgcGF5bG9hZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgdmFyIGNvbmZpZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307CiAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBRcy5zdHJpbmdpZnkocGF5bG9hZCwgewogICAgc2tpcE51bGxzOiB0cnVlCiAgfSksIHsKICAgIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgIH0sIGNvbmZpZy5oZWFkZXJzIHx8IHt9KSwKICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgc2hvd01zZyA9IGlzVW5kZWZpbmVkKGNvbmZpZy5zaG93TXNnKSB8fCBjb25maWcuc2hvd01zZzsKICAgIHZhciB0aHJvd2FibGUgPSBpc1VuZGVmaW5lZChjb25maWcudGhyb3dhYmxlKSB8fCBjb25maWcudGhyb3dhYmxlOwogICAgdmFyIHJlc3BvbnNlID0gZS5yZXNwb25zZTsKICAgIHZhciBkYXRhID0gcmVzcG9uc2UgPyByZXNwb25zZS5kYXRhIDogdW5kZWZpbmVkOwogICAgdmFyIG1zZyA9IHJlc3BvbnNlID8gZGF0YS5tZXNzYWdlIDogZS5tZXNzYWdlOyAvLyDmjqXlj6PplJnor6/lkI7nmoRqc29u5pWw5o2u5aSE55CGCgogICAgaWYgKGRhdGEpIHsKICAgICAgaWYgKHNob3dNc2cgJiYgbXNnKSB7CiAgICAgICAgTWVzc2FnZS5lcnJvcihtc2cpOwogICAgICB9CgogICAgICBpZiAodGhyb3dhYmxlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIOacieWPr+iDveaYr2NhbmNlbCB0b2RvCiAgICAgIC8vIE1lc3NhZ2UuZXJyb3IoJ+e9kee7nOmUmeivrycpOwogICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBtZXNzYWdlOiBtc2csCiAgICAgIGNvZGU6IGUuY29kZSwKICAgICAgcmVzdWx0OiBkYXRhID8gZGF0YS5yZXN1bHQgfHwgMCA6IDAKICAgIH07CiAgfSk7Cn07CmV4cG9ydCBmdW5jdGlvbiBwb3N0U2VydmljZVJldChfeCkgewogIHJldHVybiBfcG9zdFNlcnZpY2VSZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQovKioKICog5Li05pe277yaCiAqIOatpOaWueazleS4u+imgeeUqOS6juS8muWHuueOsOivt+axgumikeeOh+mZkOWItueahOmXrumimO+8iOi/mOimgeWFvOWuueS7peWJje+8iQogKi8KCmZ1bmN0aW9uIF9wb3N0U2VydmljZVJldCgpIHsKICBfcG9zdFNlcnZpY2VSZXQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1cmwpIHsKICAgIHZhciBwYXlsb2FkLAogICAgICAgIGNvbmZpZywKICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcGF5bG9hZCA9IF9hcmdzLmxlbmd0aCA+IDEgJiYgX2FyZ3NbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzFdIDoge307CiAgICAgICAgICAgIGNvbmZpZyA9IF9hcmdzLmxlbmd0aCA+IDIgJiYgX2FyZ3NbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzJdIDoge307CiAgICAgICAgICAgIGNvbmZpZy5zaG93TXNnID0gZmFsc2U7CiAgICAgICAgICAgIGNvbmZpZy50aHJvd2FibGUgPSBmYWxzZTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBwb3N0U2VydmljZSh1cmwsIHBheWxvYWQsIGNvbmZpZyk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfcG9zdFNlcnZpY2VSZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIG1lc1Bvc3RVbnRpbFN1Y2Nlc3MoX3gyKSB7CiAgcmV0dXJuIF9tZXNQb3N0VW50aWxTdWNjZXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KLyoqCiAqIERvd25sb2FkIGZpbGUKICogQHBhcmFtIHVybCByZXF1ZXN0IHVybAogKiBAcGFyYW0gcGFyYW1zIHJlcXVlc3QgYm9keQogKiBAcGFyYW0gY29uZmlnIGZpbGVuYW1lIGV0Yy4KICovCgpmdW5jdGlvbiBfbWVzUG9zdFVudGlsU3VjY2VzcygpIHsKICBfbWVzUG9zdFVudGlsU3VjY2VzcyA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMih1cmwpIHsKICAgIHZhciBwYXJhbXMsCiAgICAgICAgcmVzLAogICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHBhcmFtcyA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDoge307CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIHBvc3RTZXJ2aWNlKHVybCwgcGFyYW1zLCB7CiAgICAgICAgICAgICAgdGhyb3dhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICBzaG93TXNnOiBmYWxzZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgaWYgKCEocmVzLnJlc3VsdCA9PT0gMCAmJiByZXMubWVzc2FnZSAmJiByZXMubWVzc2FnZS5pbmNsdWRlcygn6K+35rGC6aKR546HJykpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICByZXR1cm4gc2xlZXAoMTAwMCk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiBtZXNQb3N0VW50aWxTdWNjZXNzKHVybCwgcGFyYW1zKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX21lc1Bvc3RVbnRpbFN1Y2Nlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkKHVybCkgewogIHZhciBwYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogIHZhciBjb25maWcgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHVuZGVmaW5lZDsKICByZXR1cm4gYXhpb3MoewogICAgbWV0aG9kOiAncG9zdCcsCiAgICB1cmw6IHVybCwKICAgIGRhdGE6IHBhcmFtcywKICAgIHJlc3BvbnNlVHlwZTogJ2Jsb2InLAogICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgfSkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgaWYgKCdkb3dubG9hZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKSB7CiAgICAgIC8vIOmdnklF5LiL6L29CiAgICAgIHZhciBlbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgZWxpbmsuZG93bmxvYWQgPSBjb25maWcuZmlsZW5hbWU7CiAgICAgIGVsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsaW5rKTsKICAgICAgZWxpbmsuY2xpY2soKTsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChlbGluay5ocmVmKTsgLy8g6YeK5pS+VVJMIOWvueixoQoKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluayk7CiAgICB9IGVsc2UgewogICAgICAvLyBJRTEwK+S4i+i9vQogICAgICBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBjb25maWcuZmlsZW5hbWUpOwogICAgfQogIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgc2hvd01zZyA9IGlzVW5kZWZpbmVkKGNvbmZpZy5zaG93TXNnKSB8fCBjb25maWcuc2hvd01zZzsgLy8gY29uc3QgdGhyb3dhYmxlID0gaXNVbmRlZmluZWQoY29uZmlnLnRocm93YWJsZSkgfHwgY29uZmlnLnRocm93YWJsZTsKCiAgICB2YXIgcmVzcG9uc2UgPSBlLnJlc3BvbnNlOwogICAgdmFyIGRhdGEgPSByZXNwb25zZSA/IHJlc3BvbnNlLmRhdGEgOiB1bmRlZmluZWQ7CiAgICB2YXIgbXNnID0gcmVzcG9uc2UgPyBkYXRhLm1lc3NhZ2UgOiBlLm1lc3NhZ2U7CgogICAgaWYgKHNob3dNc2cpIHsKICAgICAgTWVzc2FnZS5lcnJvcihtc2cgfHwgJycpOwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIG1lc3NhZ2U6IG1zZywKICAgICAgY29kZTogZS5jb2RlLAogICAgICByZXN1bHQ6IGRhdGEgPyBkYXRhLnJlc3VsdCB8fCAwIDogMCwKICAgICAgY2F0Y2hIYW5kbGVkOiB0cnVlCiAgICB9OwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiB1cGxvYWQodXJsLCBmaWxlKSB7CiAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7CiAgdmFyIHVwbG9hZGVyID0gYXhpb3MuY3JlYXRlKCk7CiAgcmV0dXJuIHVwbG9hZGVyLnBvc3QodXJsLCBmb3JtRGF0YSwgewogICAgaGVhZGVyczogewogICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICB9LAogICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgfSk7Cn0="},{"version":3,"sources":["/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/request/index.ts"],"names":[],"mappings":"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","sourcesContent":["import axios, { AxiosError, CancelTokenSource } from 'axios';\nimport { Message } from 'element-ui';\nimport { sleep, isUndefined } from '../../utils';\nimport Qs from 'qs';\naxios.defaults.baseURL = process.env.NODE_ENV === 'development' ? process.env.VUE_APP_TEST_BASE_URL : process.env.VUE_APP_BASE_URL;\nexport const CancelTokenSources: CancelTokenSource[] = [];\nexport interface IRestServiceConfiguration {\n  showMsg?: boolean;\n  throwable?: boolean;\n  headers?: Record<string, string>;\n}\n/**\n * @param url request url\n * @param payload request body params\n * @param query url params\n * @param config action configuration\n */\nexport const postService = (\n  url: string,\n  payload: object = {},\n  config: IRestServiceConfiguration = {},\n) => {\n  return axios.post(url, Qs.stringify(payload, {\n    skipNulls: true,\n  }), {\n    headers: Object.assign({\n      'Content-Type': 'application/x-www-form-urlencoded',\n    }, config.headers || {}),\n    withCredentials: true,\n  }).catch((e: AxiosError) => {\n    const showMsg = isUndefined(config.showMsg) || config.showMsg;\n    const throwable = isUndefined(config.throwable) || config.throwable;\n    const response = e.response;\n    const data = response ? response.data : undefined;\n    const msg = response ? data.message : e.message;\n    // 接口错误后的json数据处理\n    if (data) {\n      if (showMsg && msg) {\n        Message.error(msg);\n      }\n      if (throwable) {\n        throw new Error(msg);\n      }\n    } else {\n      // 有可能是cancel todo\n      // Message.error('网络错误');\n      throw new Error(msg);\n    }\n    return {\n      message: msg,\n      code: e.code,\n      result: data ? data.result || 0 : 0,\n    };\n  }) as Promise<any>;\n};\n\nexport async function postServiceRet(\n  url: string,\n  payload: object = {},\n  config: IRestServiceConfiguration = {},\n) {\n  config.showMsg = false;\n  config.throwable = false;\n  return await postService(url, payload, config);\n}\n\n/**\n * 临时：\n * 此方法主要用于会出现请求频率限制的问题（还要兼容以前）\n */\nexport async function mesPostUntilSuccess(url: string, params: object = {}): Promise<any> {\n  const res = await postService(url, params, {throwable: false, showMsg: false});\n  if (res.result === 0 && res.message && res.message.includes('请求频率')) {\n    await sleep(1000);\n    return await mesPostUntilSuccess(url, params);\n  }\n  return res;\n}\nexport interface IDownloadConfiguration {\n  filename: string;\n  showMsg?: boolean;\n}\n/**\n * Download file\n * @param url request url\n * @param params request body\n * @param config filename etc.\n */\nexport function download(\n  url: string,\n  params: object = {},\n  config: IDownloadConfiguration,\n) {\n  return axios({\n    method: 'post',\n    url,\n    data: params, // 参数\n    responseType: 'blob', // 表明返回服务器返回的数据类型\n    withCredentials: true,\n  }).then((blob) => {\n    if ('download' in document.createElement('a')) { // 非IE下载\n      const elink = document.createElement('a');\n      elink.download = config.filename;\n      elink.style.display = 'none';\n      elink.href = URL.createObjectURL(blob);\n      document.body.appendChild(elink);\n      elink.click();\n      URL.revokeObjectURL(elink.href); // 释放URL 对象\n      document.body.removeChild(elink);\n    } else { // IE10+下载\n      navigator.msSaveBlob(blob, config.filename);\n    }\n  }).catch((e: AxiosError) => {\n    const showMsg = isUndefined(config.showMsg) || config.showMsg;\n    // const throwable = isUndefined(config.throwable) || config.throwable;\n    const response = e.response;\n    const data = response ? response.data : undefined;\n    const msg = response ? data.message : e.message;\n    if (showMsg) {\n      Message.error(msg || '');\n    }\n    return {\n      message: msg,\n      code: e.code,\n      result: data ? data.result || 0 : 0,\n      catchHandled: true,\n    };\n  });\n}\nexport function upload(url: string, file: File) {\n  const formData = new FormData();\n  formData.append('file', file);\n  const uploader = axios.create();\n  return uploader.post(url, formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n    withCredentials: true,\n  });\n}\n"],"sourceRoot":""}]}