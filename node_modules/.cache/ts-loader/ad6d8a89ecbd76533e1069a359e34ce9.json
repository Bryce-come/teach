{"remainingRequest":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js??ref--13-2!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/menu.ts","dependencies":[{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/menu.ts","mtime":1579004471000},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js","mtime":1574737707076},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js","mtime":1574737715182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgeyBzdG9yZVBhZ2VNZW51IH0gZnJvbSAnLi4vJzsgLy8g55So5LqO6I+c5Y2V5a+86Iiq55qE6aG65bqPLG5hbWUraWNvbgoKZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTWVudShyb3V0ZXMsIG1haW5NZW51VGl0bGVzKSB7CiAgLy8g55Sf5oiQbWVudSBpdGVtCiAgdmFyIHJvdXRlSW5kZXggPSByb3V0ZXMuZmlsdGVyKGZ1bmN0aW9uIChjb25maWcpIHsKICAgIHJldHVybiBjb25maWcubmFtZSA9PT0gJ2luZGV4JzsKICB9KVswXTsKICB2YXIgY2hpbGRyZW4gPSByb3V0ZUluZGV4ICYmIHJvdXRlSW5kZXguY2hpbGRyZW4gPyByb3V0ZUluZGV4LmNoaWxkcmVuIDogW107IC8vIG1lbnU6IHt0aXRsZSwgcHJpdmlsZWdlcyhhbGwpLCBjaGlsZHJlbjpbe2NUaXRsZSwgbmFtZSwgcHJpdmlsZWdlc31dLCB9CgogIHZhciBtZW51ID0gW107CiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGNoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewogICAgICB2YXIgbWFpblJvdXRlSXRlbSA9IF9zdGVwLnZhbHVlOwoKICAgICAgLy8g5LiN5qOA5rWLCiAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgaWYgKCFtYWluUm91dGVJdGVtLm1ldGEgfHwgbWFpblJvdXRlSXRlbS5tZXRhLnBhcmVudE5hbWUpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgdmFyIHRpdGxlID0gdm9pZCAwOwogICAgICB2YXIgb25seU1haW5UaXRsZSA9IHZvaWQgMDsgLy8gQHRzLWlnbm9yZQoKICAgICAgaWYgKG1haW5Sb3V0ZUl0ZW0ubWV0YS5tZW51VGl0bGUpIHsKICAgICAgICB0aXRsZSA9IG1haW5Sb3V0ZUl0ZW0ubWV0YS5tZW51VGl0bGU7CiAgICAgIH0gZWxzZSBpZiAobWFpblJvdXRlSXRlbS5tZXRhLnBhcmVudENOYW1lKSB7CiAgICAgICAgdGl0bGUgPSBtYWluUm91dGVJdGVtLm1ldGEucGFyZW50Q05hbWU7CiAgICAgIH0gZWxzZSBpZiAobWFpblJvdXRlSXRlbS5tZXRhLkNOYW1lKSB7CiAgICAgICAgb25seU1haW5UaXRsZSA9IHRydWU7IC8vIEB0cy1pZ25vcmUKCiAgICAgICAgdGl0bGUgPSBtYWluUm91dGVJdGVtLm1ldGEuQ05hbWU7CiAgICAgIH0KCiAgICAgIHZhciBpID0gbWFpbk1lbnVUaXRsZXMuaW5kZXhPZih0aXRsZSk7CgogICAgICBpZiAoaSA+PSAwKSB7CiAgICAgICAgaWYgKCFtZW51W2kgLyAyXSkgewogICAgICAgICAgbWVudVtpIC8gMl0gPSB7CiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgICAgaWNvbjogbWFpbk1lbnVUaXRsZXNbaSArIDFdCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKG9ubHlNYWluVGl0bGUpIHsKICAgICAgICAgIC8vIOayoeacieWtkOWvvOiIqgogICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgbWVudVtpIC8gMl0uY1RpdGxlID0gbWFpblJvdXRlSXRlbS5tZXRhLkNOYW1lOwogICAgICAgICAgbWVudVtpIC8gMl0ubmFtZSA9IG1haW5Sb3V0ZUl0ZW0ubmFtZTsgLy8gQHRzLWlnbm9yZQoKICAgICAgICAgIG1lbnVbaSAvIDJdLnByaXZpbGVnZXMgPSBtYWluUm91dGVJdGVtLm1ldGEucHJpdmlsZWdlczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9jaGlsZHJlbiA9IG1lbnVbaSAvIDJdLmNoaWxkcmVuIHx8IFtdOwoKICAgICAgICAgIGlmIChfY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIG1lbnVbaSAvIDJdLmNoaWxkcmVuID0gX2NoaWxkcmVuOwogICAgICAgICAgfQoKICAgICAgICAgIF9jaGlsZHJlbi5wdXNoKHsKICAgICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgICBjVGl0bGU6IG1haW5Sb3V0ZUl0ZW0ubWV0YS5DTmFtZSwKICAgICAgICAgICAgbmFtZTogbWFpblJvdXRlSXRlbS5uYW1lLAogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIHByaXZpbGVnZXM6IG1haW5Sb3V0ZUl0ZW0ubWV0YS5wcml2aWxlZ2VzCiAgICAgICAgICB9KTsgLy8gQHRzLWlnbm9yZQoKCiAgICAgICAgICBpZiAobWFpblJvdXRlSXRlbS5tZXRhLnByaXZpbGVnZXMpIHsKICAgICAgICAgICAgdmFyIHByaXZpbGVnZXMgPSBtZW51W2kgLyAyXS5wcml2aWxlZ2VzIHx8IFtdOyAvLyBAdHMtaWdub3JlCgogICAgICAgICAgICBtZW51W2kgLyAyXS5wcml2aWxlZ2VzID0gcHJpdmlsZWdlcy5jb25jYXQobWFpblJvdXRlSXRlbS5tZXRhLnByaXZpbGVnZXMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgIH0KICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICB9CiAgICB9CiAgfQoKICBzdG9yZVBhZ2VNZW51LnB1c2guYXBwbHkoc3RvcmVQYWdlTWVudSwgbWVudSk7Cn0="},{"version":3,"sources":["/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/menu.ts"],"names":[],"mappings":"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","sourcesContent":["import { IMenuItem, storePageMenu } from '../';\n\n// 用于菜单导航的顺序,name+icon\nexport function buildMenu(routes: any[], mainMenuTitles: any) {\n  // 生成menu item\n  const routeIndex = routes.filter((config) => config.name === 'index')[0];\n  const children = routeIndex && routeIndex.children ? routeIndex.children : [];\n  // menu: {title, privileges(all), children:[{cTitle, name, privileges}], }\n  const menu: IMenuItem[] = [];\n  for (const mainRouteItem of children) {\n    // 不检测\n    // @ts-ignore\n    if (!mainRouteItem.meta || mainRouteItem.meta.parentName) { continue; }\n    let title;\n    let onlyMainTitle;\n    // @ts-ignore\n    if (mainRouteItem.meta.menuTitle) { title = mainRouteItem.meta.menuTitle; } else if (mainRouteItem.meta.parentCName) { title = mainRouteItem.meta.parentCName; } else if (mainRouteItem.meta.CName) {\n      onlyMainTitle = true;\n      // @ts-ignore\n      title = mainRouteItem.meta.CName;\n    }\n    const i = mainMenuTitles.indexOf(title);\n    if (i >= 0) {\n      if (!menu[i / 2]) {\n        menu[i / 2] = {\n          title,\n          icon: mainMenuTitles[i + 1],\n        };\n      }\n      if (onlyMainTitle) {\n        // 没有子导航\n        // @ts-ignore\n        menu[i / 2].cTitle = mainRouteItem.meta.CName;\n        menu[i / 2].name = mainRouteItem.name;\n        // @ts-ignore\n        menu[i / 2].privileges = mainRouteItem.meta.privileges;\n      } else {\n        const children = menu[i / 2].children || [];\n        if (children.length === 0) {\n          menu[i / 2].children = children;\n        }\n        children.push({\n          // @ts-ignore\n          cTitle: mainRouteItem.meta.CName,\n          name: mainRouteItem.name,\n          // @ts-ignore\n          privileges: mainRouteItem.meta.privileges,\n        });\n        // @ts-ignore\n        if (mainRouteItem.meta.privileges) {\n          const privileges = menu[i / 2].privileges || [];\n          // @ts-ignore\n          menu[i / 2].privileges = privileges.concat(mainRouteItem.meta.privileges);\n        }\n      }\n\n    }\n  }\n  storePageMenu.push(...menu);\n}\n"],"sourceRoot":""}]}