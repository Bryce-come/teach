{"remainingRequest":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js??ref--13-2!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/src/views/login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/src/views/login.vue","mtime":1580137040823},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js","mtime":1574737707076},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js","mtime":1574737715182},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/vue-loader/lib/index.js","mtime":1581426799590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy95Y2ovV2Vic3Rvcm1Qcm9qZWN0cy9sdHRQcm9qZWN0cy90ZWFjaC1wbGF0Zm9ybS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveWNqL1dlYnN0b3JtUHJvamVjdHMvbHR0UHJvamVjdHMvdGVhY2gtcGxhdGZvcm0td2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgcmVmLCBjcmVhdGVDb21wb25lbnQgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IHVzZUxvYWRpbmcgfSBmcm9tICd3ZWItdG9vbGtpdC9zcmMvc2VydmljZSc7CmltcG9ydCB7IHBvc3RTZXJ2aWNlLCBzdG9yZVVzZXJJbmZvLCB1cGRhdGVTdG9yZVVzZXJJbmZvIH0gZnJvbSAnd2ViLXRvb2xraXQvc3JjL2Nhc2UtbWFpbic7CmltcG9ydCB7IGxvZ2luVGl0bGUxLCBsb2dpblRpdGxlMiwgbG9naW5Mb2dvLCB1cmxNYXAsIHNjaGVtZSB9IGZyb20gJ0AvY29uZmlnJzsKaW1wb3J0IHsgcm91dGVyIH0gZnJvbSAnQC9tYWluJzsKaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnd2ViLXRvb2xraXQvc3JjL3V0aWxzL2luZGV4JzsKZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgbG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICB2YXIgZm9ybSA9IHJlZih7CiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgcHdkOiAnJwogICAgfSk7CiAgICB2YXIgZm9ybVJlZiA9IHJlZihudWxsKTsKICAgIHZhciBydWxlID0gewogICAgICB1c2VybmFtZTogewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnnlKjmiLflkI0nLAogICAgICAgIHRyaWdnZXI6ICdub25lJwogICAgICB9LAogICAgICBwd2Q6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ivt+Whq+WGmeWvhueggScsCiAgICAgICAgdHJpZ2dlcjogJ25vbmUnCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBtaW46IDYsCiAgICAgICAgbWVzc2FnZTogJ+WvhueggemVv+W6puS4jeiDveWwj+S6jjbkvY0nLAogICAgICAgIHRyaWdnZXI6ICdub25lJwogICAgICB9XQogICAgfTsKCiAgICBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9sb2dpbigpIHsKICAgICAgX2xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdmFsaWQsIF9yZWYsIGRhdGEsIHJlZGlyZWN0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBmb3JtUmVmLnZhbHVlLnZhbGlkYXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHZhbGlkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGFzc2VydCh2YWxpZCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBwb3N0U2VydmljZSh1cmxNYXAubG9naW5Db21tb24udXJsLCBfb2JqZWN0U3ByZWFkKHt9LCBmb3JtLnZhbHVlLCB7CiAgICAgICAgICAgICAgICAgIHNjaGVtYTogc2NoZW1lCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9yZWYgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF9yZWYuZGF0YTsKICAgICAgICAgICAgICAgIHVwZGF0ZVN0b3JlVXNlckluZm8oZGF0YSk7IC8vIOiuvue9rueZu+W9leWQjuWbnuWIsOeZu+W9leWJjemhtemdogogICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZQoKICAgICAgICAgICAgICAgIHJlZGlyZWN0ID0gewogICAgICAgICAgICAgICAgICBuYW1lOiAnaW5kZXgnLAogICAgICAgICAgICAgICAgICBxdWVyeToge30KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKHN0b3JlVXNlckluZm8ucmVkaXJlY3QgJiYgc3RvcmVVc2VySW5mby5yZWRpcmVjdC5uYW1lICYmIHN0b3JlVXNlckluZm8ucmVkaXJlY3QubmFtZSAhPT0gJ25vdEZvdW5kJyAmJiBzdG9yZVVzZXJJbmZvLnJlZGlyZWN0Lm5hbWUgIT09ICdsb2dpbicpIHsKICAgICAgICAgICAgICAgICAgcmVkaXJlY3QubmFtZSA9IHN0b3JlVXNlckluZm8ucmVkaXJlY3QubmFtZTsKICAgICAgICAgICAgICAgICAgcmVkaXJlY3QucXVlcnkgPSBzdG9yZVVzZXJJbmZvLnJlZGlyZWN0LnF1ZXJ5OwogICAgICAgICAgICAgICAgfSAvLyBAdHMtaWdub3JlCgoKICAgICAgICAgICAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QgPSByZWRpcmVjdDsKICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHJlZGlyZWN0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBmb3JtUmVmOiBmb3JtUmVmLAogICAgICBsb2dpblRpdGxlMTogbG9naW5UaXRsZTEsCiAgICAgIGxvZ2luVGl0bGUyOiBsb2dpblRpdGxlMiwKICAgICAgbG9naW5Mb2dvOiBsb2dpbkxvZ28sCiAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgIGZvcm06IGZvcm0sCiAgICAgIHJ1bGU6IHJ1bGUsCiAgICAgIGxvZ2luOiB1c2VMb2FkaW5nKGxvYWRpbmcsIGxvZ2luKQogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/src/views/login.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;AAgCA,SAAS,GAAT,EAAc,eAAd,QAAqD,sBAArD;AAEA,SAAS,UAAT,QAA2B,yBAA3B;AACA,SAAS,WAAT,EAAsB,aAAtB,EAAqC,mBAArC,QAAgE,2BAAhE;AACA,SAAQ,WAAR,EAAqB,WAArB,EAAkC,SAAlC,EAA6C,MAA7C,EAAqD,MAArD,QAAkE,UAAlE;AACA,SAAQ,MAAR,QAAqB,QAArB;AAEA,SAAQ,MAAR,QAAqB,6BAArB;AACA,eAAe,eAAe,CAAC;AAC7B,EAAA,KAD6B,mBACxB;AACH,QAAM,OAAO,GAAG,GAAG,CAAC,KAAD,CAAnB;AACA,QAAM,IAAI,GAAG,GAAG,CAAC;AAAE,MAAA,QAAQ,EAAE,EAAZ;AAAgB,MAAA,GAAG,EAAE;AAArB,KAAD,CAAhB;AACA,QAAM,OAAO,GAAqB,GAAG,CAAC,IAAD,CAArC;AACA,QAAM,IAAI,GAAG;AACX,MAAA,QAAQ,EAAE;AACR,QAAA,QAAQ,EAAE,IADF;AAER,QAAA,OAAO,EAAE,QAFD;AAGR,QAAA,OAAO,EAAE;AAHD,OADC;AAMX,MAAA,GAAG,EAAE,CAAC;AACJ,QAAA,QAAQ,EAAE,IADN;AAEJ,QAAA,OAAO,EAAE,OAFL;AAGJ,QAAA,OAAO,EAAE;AAHL,OAAD,EAIF;AACD,QAAA,IAAI,EAAE,QADL;AAED,QAAA,GAAG,EAAE,CAFJ;AAGD,QAAA,OAAO,EAAE,YAHR;AAID,QAAA,OAAO,EAAE;AAJR,OAJE;AANM,KAAb;;AAJG,aAqBY,KArBZ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,8BAqBH;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACuB,OAAO,CAAC,KAAR,CAAyB,QAAzB,EADvB;;AAAA;AACQ,gBAAA,KADR;AAEE,gBAAA,MAAM,CAAC,KAAD,CAAN;AAFF;AAAA,uBAGuB,WAAW,CAAC,MAAM,CAAC,WAAP,CAAmB,GAApB,oBAC3B,IAAI,CAAC,KADsB;AAE9B,kBAAA,MAAM,EAAE;AAFsB,mBAHlC;;AAAA;AAAA;AAGS,gBAAA,IAHT,QAGS,IAHT;AAOE,gBAAA,mBAAmB,CAAC,IAAD,CAAnB,CAPF,CAQE;AACA;;AACM,gBAAA,QAVR,GAU0B;AACtB,kBAAA,IAAI,EAAE,OADgB;AAEtB,kBAAA,KAAK,EAAE;AAFe,iBAV1B;;AAcE,oBACE,aAAa,CAAC,QAAd,IACA,aAAa,CAAC,QAAd,CAAuB,IADvB,IAEA,aAAa,CAAC,QAAd,CAAuB,IAAvB,KAAgC,UAFhC,IAGA,aAAa,CAAC,QAAd,CAAuB,IAAvB,KAAgC,OAJlC,EAKE;AACA,kBAAA,QAAQ,CAAC,IAAT,GAAgB,aAAa,CAAC,QAAd,CAAuB,IAAvC;AACA,kBAAA,QAAQ,CAAC,KAAT,GAAiB,aAAa,CAAC,QAAd,CAAuB,KAAxC;AACD,iBAtBH,CAuBE;;;AACA,gBAAA,aAAa,CAAC,QAAd,GAAyB,QAAzB;AACA,gBAAA,MAAM,CAAC,IAAP,CAAY,QAAZ;;AAzBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OArBG;AAAA;AAAA;;AAgDH,WAAO;AACL,MAAA,OAAO,EAAP,OADK;AACI,MAAA,WAAW,EAAX,WADJ;AACiB,MAAA,WAAW,EAAX,WADjB;AAC8B,MAAA,SAAS,EAAT,SAD9B;AAEL,MAAA,OAAO,EAAP,OAFK;AAEI,MAAA,IAAI,EAAJ,IAFJ;AAEU,MAAA,IAAI,EAAJ,IAFV;AAEgB,MAAA,KAAK,EAAE,UAAU,CAAC,OAAD,EAAU,KAAV;AAFjC,KAAP;AAID;AArD4B,CAAD,CAA9B","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ref, createComponent, Ref, onMounted } from '@vue/composition-api';\nimport { ElForm } from 'element-ui/types/form';\nimport { useLoading } from 'web-toolkit/src/service';\nimport { postService, storeUserInfo, updateStoreUserInfo } from 'web-toolkit/src/case-main';\nimport {loginTitle1, loginTitle2, loginLogo, urlMap, scheme} from '@/config';\nimport {router} from '@/main';\nimport { Route } from 'vue-router';\nimport {assert} from 'web-toolkit/src/utils/index';\nexport default createComponent({\n  setup() {\n    const loading = ref(false);\n    const form = ref({ username: '', pwd: '' });\n    const formRef: Ref<ElForm|null> = ref(null);\n    const rule = {\n      username: {\n        required: true,\n        message: '请填写用户名',\n        trigger: 'none',\n      },\n      pwd: [{\n        required: true,\n        message: '请填写密码',\n        trigger: 'none',\n      }, {\n        type: 'string',\n        min: 6,\n        message: '密码长度不能小于6位',\n        trigger: 'none',\n      }],\n    };\n    async function login() {\n      const valid = await (formRef.value as ElForm).validate();\n      assert(valid);\n      const {data} = await postService(urlMap.loginCommon.url, {\n        ...form.value,\n        schema: scheme,\n      });\n      updateStoreUserInfo(data);\n      // 设置登录后回到登录前页面\n      // @ts-ignore\n      const redirect: Route = {\n        name: 'index',\n        query: {},\n      };\n      if (\n        storeUserInfo.redirect &&\n        storeUserInfo.redirect.name &&\n        storeUserInfo.redirect.name !== 'notFound' &&\n        storeUserInfo.redirect.name !== 'login'\n      ) {\n        redirect.name = storeUserInfo.redirect.name;\n        redirect.query = storeUserInfo.redirect.query;\n      }\n      // @ts-ignore\n      storeUserInfo.redirect = redirect;\n      router.push(redirect);\n    }\n    return {\n      formRef, loginTitle1, loginTitle2, loginLogo,\n      loading, form, rule, login: useLoading(loading, login),\n    };\n  },\n});\n"],"sourceRoot":""}]}