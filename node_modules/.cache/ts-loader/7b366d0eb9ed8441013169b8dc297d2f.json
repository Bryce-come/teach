{"remainingRequest":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js??ref--13-2!/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/intercepters.ts","dependencies":[{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/intercepters.ts","mtime":1579004471000},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/cache-loader/dist/cjs.js","mtime":1574737719973},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/babel-loader/lib/index.js","mtime":1574737707076},{"path":"/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/ts-loader/index.js","mtime":1574737715182}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy95Y2ovV2Vic3Rvcm1Qcm9qZWN0cy9sdHRQcm9qZWN0cy90ZWFjaC1wbGF0Zm9ybS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy95Y2ovV2Vic3Rvcm1Qcm9qZWN0cy9sdHRQcm9qZWN0cy90ZWFjaC1wbGF0Zm9ybS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL1VzZXJzL3ljai9XZWJzdG9ybVByb2plY3RzL2x0dFByb2plY3RzL3RlYWNoLXBsYXRmb3JtLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKLy8gQHRzLWlnbm9yZQppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7CmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOwppbXBvcnQgeyBDYW5jZWxUb2tlblNvdXJjZXMgfSBmcm9tICcuLi9yZXF1ZXN0JzsKaW1wb3J0IHsgbGlzdENvbnRhaW5BbmQgfSBmcm9tICcuLi8uLi91dGlscyc7CmltcG9ydCB7IHN0b3JlVXNlckluZm8sIGluaXRTdG9yZVVzZXJJbmZvLCB1cGRhdGVTdG9yZUN1cnJlbnRSb3V0ZSB9IGZyb20gJy4uL3N0b3JlJzsKLyoqCiAqIOeUqOS6jumhtemdouadg+mZkOeahOagoemqjAogKi8KCmV4cG9ydCBmdW5jdGlvbiBjaGVja1ByaXZpbGVnZShhbGwsIG5lZWQpIHsKICBpZiAoIW5lZWQgfHwgbmVlZC5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgaWYgKCFhbGwgfHwgYWxsLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgdHJ5IHsKICAgIGZvciAodmFyIF9pdGVyYXRvciA9IG5lZWRbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgIHZhciBlID0gX3N0ZXAudmFsdWU7CgogICAgICBpZiAodHlwZW9mIGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy8gb3IKICAgICAgICBpZiAoYWxsLmluZGV4T2YoZSkgPiAtMSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKF90eXBlb2YoZSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgLy8gW13vvIxhbmQKICAgICAgICBpZiAobGlzdENvbnRhaW5BbmQuYXBwbHkodm9pZCAwLCBbYWxsXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGUpKSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgfSBmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgIH0KICAgIH0gZmluYWxseSB7CiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gZmFsc2U7Cn0KZXhwb3J0IGZ1bmN0aW9uIHJvdXRlSW50ZXJjZXB0KHJvdXRlcikgewogIHJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogICAgLy8g5Y+W5raI6K+35rGCCiAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlOwogICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlOwogICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKCiAgICB0cnkgewogICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gQ2FuY2VsVG9rZW5Tb3VyY2VzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IF9zdGVwMi52YWx1ZTsKICAgICAgICBzb3VyY2UuY2FuY2VsKCk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlOwogICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7CiAgICB9IGZpbmFsbHkgewogICAgICB0cnkgewogICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTsKICAgICAgICB9CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikgewogICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIENhbmNlbFRva2VuU291cmNlcy5zcGxpY2UoMCwgQ2FuY2VsVG9rZW5Tb3VyY2VzLmxlbmd0aCk7CgogICAgaWYgKHRvLm5hbWUgIT09IGZyb20ubmFtZSAmJiBwcm9jZXNzLmVudi5WVUVfQVBQX1JFUVVFU1RfTU9ERSAhPT0gJ2Rpc3BsYXknKSB7CiAgICAgIE5Qcm9ncmVzcy5zdGFydCgpOwogICAgfQoKICAgIGlmICghc3RvcmVVc2VySW5mby50b2tlbikgewogICAgICBpbml0U3RvcmVVc2VySW5mbygpOwogICAgfSAvLyDlpITnkIbpnIDopoHnmbvlvZXnmoQKCgogICAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgIHJldHVybiAhcmVjb3JkLm1ldGEuYXV0aERpc2FibGVkOwogICAgfSkpIHsKICAgICAgaWYgKCFzdG9yZVVzZXJJbmZvLnRva2VuKSB7CiAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgIHN0b3JlVXNlckluZm8ucmVkaXJlY3QgPSB0bzsKICAgICAgICBuZXh0KHsKICAgICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDnlKjmiLfmnYPpmZAKICAgICAgICB2YXIgdXNlciA9IHN0b3JlVXNlckluZm8udXNlcjsKCiAgICAgICAgaWYgKCF0by5tZXRhIHx8ICF0by5tZXRhLnByaXZpbGVnZXMgfHwgY2hlY2tQcml2aWxlZ2UodXNlci5yb2xlID8gdXNlci5yb2xlLnByaXZpbGVnZXMgOiBbXSwgdG8ubWV0YS5wcml2aWxlZ2VzKSkgewogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgbmFtZTogJzQwNCcsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIG1zZzogJ+W9k+WJjemhtemdouaXoOadg+mZkOafpeeciycKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHRvLm5hbWUgPT09ICdsb2dpbicgJiYgZnJvbS5wYXRoICE9PSB0by5wYXRoICYmIHN0b3JlVXNlckluZm8udG9rZW4pIHsKICAgICAgLy8g55u05o6l6K6/6ZeubG9naW7nmoQKICAgICAgLy8g6K+05piO5piv5bey57uP55m75b2V55qE5bCx5Zue5Y6f5aSECiAgICAgIG5leHQoZnJvbS5wYXRoKTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoKTsKICAgIH0KCiAgICBuZXh0KCk7CiAgfSk7CiAgcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8pIHsKICAgIHZhciBsYXN0TWF0Y2ggPSB0by5tYXRjaGVkW3RvLm1hdGNoZWQubGVuZ3RoIC0gMV07CiAgICAvKioKICAgICAqIOiOt+WPluacgOWQjuS4gOS4quWMuemFjeeahOi3r+eUsSwg6YeN5YaZ5YW26Lev55Sx57uE5Lu255qEbW91bnRlZOmSqeWtkCwg5L2/5YW25Y6f5pys55qEbW91bnRlZOe7k+adn+WQjuiwg+eUqE5Qcm9ncmVzcy5kb25lKCkKICAgICAqLwoKICAgIGlmIChsYXN0TWF0Y2gpIHsKICAgICAgLy8g5YWI5L+d5a2Y5b2T5YmN6Lev55Sx6Iezc3RvcmUKICAgICAgdXBkYXRlU3RvcmVDdXJyZW50Um91dGUodG8pOwoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JHZhbHVlcyA9IE9iamVjdC52YWx1ZXMobGFzdE1hdGNoLmNvbXBvbmVudHMpOyBfaSA8IF9PYmplY3QkdmFsdWVzLmxlbmd0aDsgX2krKykgewogICAgICAgIHZhciBjb21wb25lbnQgPSBfT2JqZWN0JHZhbHVlc1tfaV07CgogICAgICAgIGlmICghY29tcG9uZW50Lm9wdGlvbnMgJiYgKCFjb21wb25lbnQuX0N0b3IgfHwgIWNvbXBvbmVudC5fQ3RvclswXSkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgdmFyIF9tb3VudGVkcyA9IGNvbXBvbmVudC5vcHRpb25zID8gY29tcG9uZW50Lm9wdGlvbnMubW91bnRlZCA6IGNvbXBvbmVudC5fQ3RvclswXS5vcHRpb25zLm1vdW50ZWQ7CgogICAgICAgIGlmIChfbW91bnRlZHMgJiYgX21vdW50ZWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBsYXN0TW91bnRlZCA9IF9tb3VudGVkcy5wb3AoKTsKCiAgICAgICAgICAgIHZhciBucHJvZ3Jlc3NEb25lSGFuZGxlciA9CiAgICAgICAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFzdE1vdW50ZWQuY2FsbCh0aGlzKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5wcm9ncmVzc0RvbmVIYW5kbGVyKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KCk7CgogICAgICAgICAgICBfbW91bnRlZHMucHVzaChucHJvZ3Jlc3NEb25lSGFuZGxlcik7CiAgICAgICAgICB9KSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb21wb25lbnQub3B0aW9ucy5tb3VudGVkID0gW2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICB9XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBpbnMgPSBsYXN0TWF0Y2guaW5zdGFuY2VzLmRlZmF1bHQ7CgogICAgICBpZiAoaW5zKSB7CiAgICAgICAgdmFyIG1vdW50ZWRzID0gaW5zLiRvcHRpb25zLm1vdW50ZWQ7CiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZTsKICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7CiAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSAobW91bnRlZHMgfHwgW10pW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7CiAgICAgICAgICAgIHZhciBtb3VudGVkID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICBtb3VudGVkLmNhbGwoaW5zKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7CiAgICAgICAgICBfaXRlcmF0b3JFcnJvcjMgPSBlcnI7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgJiYgX2l0ZXJhdG9yMy5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHsKICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlucy4kZW1pdCgnaG9vazptb3VudGVkJyk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICog55Sx5LqO55u45ZCM6Lev55Sx55qE6Lez6L2s5LiN5Lya6YeN5paw5oyC6L296Lev55Sx57uE5Lu2LCDmraTml7bpobvopoHmiYvliqjosIPnlKhtb3VudGVkLCBpbnN0YW5jZXPkuLrot6/nlLHnu4Tku7bnmoTlrp7kvosKICAgICAqLwogICAgLy8gICBpZiAodG8ubmFtZSA9PT0gZnJvbS5uYW1lKSB7CiAgICAvLyAgICAgaWYgKGxhc3RNYXRjaCkgewogICAgLy8gICAgICAgZm9yIChjb25zdCBba2V5LCBjb21wb25lbnRdIG9mIE9iamVjdC5lbnRyaWVzKGxhc3RNYXRjaC5jb21wb25lbnRzKSkgewogICAgLy8gICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAvLyAgICAgICAgIGNvbnN0IG1vdW50ZWRzID0gY29tcG9uZW50Lm9wdGlvbnMubW91bnRlZCBhcyAoKCkgPT4gdm9pZClbXSB8IHZvaWQ7CiAgICAvLyAgICAgICAgIGlmIChtb3VudGVkcykgewogICAgLy8gICAgICAgICAgIGZvciAoY29uc3QgbW91bnRlZCBvZiBtb3VudGVkcykgewogICAgLy8gICAgICAgICAgICAgbW91bnRlZC5jYWxsKGxhc3RNYXRjaC5pbnN0YW5jZXNba2V5XSk7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgfQogICAgLy8gICB9CgogIH0pOwp9"},{"version":3,"sources":["/Users/ycj/WebstormProjects/lttProjects/teach-platform-web/node_modules/web-toolkit/src/case-main/router/intercepters.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-ignore\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport VueRouter from 'vue-router';\nimport { Route } from 'vue-router';\nimport { CancelTokenSources } from '../request';\nimport { listContainAnd } from '../../utils';\nimport { storeUserInfo, initStoreUserInfo, updateStoreCurrentRoute } from '../store';\n\n/**\n * 用于页面权限的校验\n */\nexport function checkPrivilege(all: any[], need: any[]) {\n  if (!need || need.length === 0) {\n    return true;\n  }\n  if (!all || all.length === 0) { return false; }\n  for (const e of need) {\n    if ((typeof e) === 'string') {\n      // or\n      if (all.indexOf(e) > -1) { return true; }\n    } else if (typeof e === 'object') {\n      // []，and\n      if (listContainAnd(all, ...e)) { return true; }\n    }\n  }\n  return false;\n}\n\nexport function routeIntercept(router: VueRouter) {\n  router.beforeEach((to, from, next) => {\n    // 取消请求\n    for (const source of CancelTokenSources) {\n      source.cancel();\n    }\n    CancelTokenSources.splice(0, CancelTokenSources.length);\n    if (to.name !== from.name && process.env.VUE_APP_REQUEST_MODE !== 'display') {\n      NProgress.start();\n    }\n    if (!storeUserInfo.token) {\n      initStoreUserInfo();\n    }\n    // 处理需要登录的\n    if (to.matched.some((record) => !record.meta.authDisabled)) {\n      if (!storeUserInfo.token) {\n        // @ts-ignore\n        storeUserInfo.redirect = (to as Route);\n        next({name: 'login'});\n      } else {\n        // 用户权限\n        const user = storeUserInfo!.user;\n        if (\n          !to.meta ||\n          !to.meta.privileges ||\n          checkPrivilege((user!.role ? user!.role.privileges : []), to.meta.privileges)\n        ) {\n          next();\n        } else {\n          next({name: '404', params: {msg: '当前页面无权限查看'}});\n        }\n      }\n    } else if (to.name === 'login' && from.path !== to.path && storeUserInfo.token) {\n      // 直接访问login的\n      // 说明是已经登录的就回原处\n      next(from.path);\n    } else {\n      next();\n    }\n    next();\n  });\n  router.afterEach(to => {\n    const lastMatch = to.matched[to.matched.length - 1];\n    /**\n     * 获取最后一个匹配的路由, 重写其路由组件的mounted钩子, 使其原本的mounted结束后调用NProgress.done()\n     */\n    if (lastMatch) {\n      // 先保存当前路由至store\n      updateStoreCurrentRoute(to);\n      for (const component of Object.values(lastMatch.components)) {\n        if (!(component as any).options && (!(component as any)._Ctor || !(component as any)._Ctor[0])) {\n          continue;\n        }\n        const mounteds = (component as any).options ? (component as any).options.mounted : (component as any)._Ctor[0].options.mounted as Array<() => void> | void;\n        if (mounteds && mounteds.length > 0) {\n          const lastMounted = mounteds.pop();\n          const nprogressDoneHandler = async function(this: any) {\n            await lastMounted!.call(this);\n            NProgress.done();\n          };\n          mounteds.push(nprogressDoneHandler);\n        } else {\n          (component as any).options.mounted = [() => NProgress.done()];\n        }\n      }\n      const ins = lastMatch.instances.default;\n      if (ins) {\n        const mounteds = ins.$options.mounted as Array<() => void> | void;\n        for (const mounted of (mounteds || [])) {\n          mounted.call(ins);\n        }\n        ins.$emit('hook:mounted');\n      }\n    }\n    /**\n     * 由于相同路由的跳转不会重新挂载路由组件, 此时须要手动调用mounted, instances为路由组件的实例\n     */\n    //   if (to.name === from.name) {\n    //     if (lastMatch) {\n    //       for (const [key, component] of Object.entries(lastMatch.components)) {\n    //         // @ts-ignore\n    //         const mounteds = component.options.mounted as (() => void)[] | void;\n    //         if (mounteds) {\n    //           for (const mounted of mounteds) {\n    //             mounted.call(lastMatch.instances[key]);\n    //           }\n    //         }\n    //       }\n    //     }\n    //   }\n  });\n}\n"],"sourceRoot":""}]}