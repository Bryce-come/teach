# web-toolkit
应用于web的通用工具库

# 进度
- [ ] 文档修改
- [ ] components中组件名修改
- [ ] 为开源做去敏

# Usage
+ 编写一个配置对象, 在其中声明所有路由, 核心库提供一部分默认页面(类型提示已给出), 可在pages中直接声明, 自定义页面须传入filePath参数, 该参数是一个返回动态import的函数, 如`() => import('自定义页面文件的路径')`,同时在pages里声明该页面的路由, 当filePath属性存在时, 不采用默认页面;
+ 页面编写与普通的Vue项目一样;
+ 也可以通过`import 'lkt-mes-web-core';`的形式注册下面提供的组件, 用`new Vue`来生成页面;

# 应用程序结构
如果使用Lauch生成页面, 页面将会自带一个导航栏, 通过pageBeans配置页面, 这些页面将会在固定的页面区域显示, store主要提供用户信息和工作时间, core写好的接口可以使用CommonApi来请求, 项目定制的可以使用postService, mesPostUntilSuccess会在接口响应有效数据时才返回;

# Note
+ 编写页面请使用Vue 3.0的composition-api, class组件将在不久以后弃用, 请勿使用mixin, 这会随着class组件一起弃用;
+ 如需新增工具函数, 请在tests/unit中增加单元测试;
+ vue3-migaration目录用于存放vue 3编写的可复用功能，将来须完全替代目前的mixin、decorator;
+ 避免使用data-tables组件，请使用lkt-table;
+ element-ui按需引入，新增使用到的组件请在plugins/element-ui中注册；

# TODO
+ 目前的lauch方式须要重构，pageBean配置方式限制了页面配置的灵活度，而在效率上没有太大的提升，考虑将所有默认页面抽离出来放到根目录的pages文件夹，每个页面对应一个模块，模块导出页面的vue模块、权限等页面特定的数据，路由在各个项目独立编写，需要用到默认页面时从pages引入，main.ts仅导出工具函数；
+ store有历史遗留代码，很多需要整理清除；
+ 默认页面须要用composition-api全部重构，vue 3正式发布时可以使用精简构建（不兼容IE 11），可以减少很多代码体积；
+ 如有精力可以使用monorepo方式拆分本库，可以解决更新一次库需要把所有依赖重新下载一次导致耗时较长的问题；

# Filter
+ DD:hh:mm: 参数为毫秒数;
+ mm:ss.m: 参数为毫秒数;
+ hh:mm:ss: 别名HMS, 参数为毫秒数;
+ DD:hh:mm:ss: 参数为毫秒数;
+ datetime: 参数为Date对象;
+ date: 参数为Date对象;

# Directive 
+ v-drag: 使一个元素可以拖拽, strict修饰符用于指定仅当事件触发的元素为该元素时才可拖动, pointer修饰符用于将cursor换为pointer, 可选地绑定一个布尔值, 为true时增加拖拽事件;

# Component
+ lkt-check: 根据bool值显示√或×;
+ lkt-chart: 对vue-echarts组件的封装, 可将传入的数据转换为el-table形式, 默认提供图表类型的转换;
+ lkt-date-picker: 对el-date-picker的封装, 默认提供了一些快捷选项;
+ lkt-progress: 表现类似el-progress, circle类型多出一个active选项, 进度条会有特效;
+ lkt-scrollbar: 一个具有美化滚动条的容器;
+ lkt-select: 对el-select的封装, 简化代码, 提供全选功能, 根据multiple的值有不同的默认表现;
+ lkt-table: 带分页, 用法相当于el-table和el-pagination的结合;

# CSS 类
+ flex
  + flex: 开启flex;
  + inline: 内联元素, 基本等同inline-block;
  + start: flex-start;
  + end: flex-end;
  + center: 水平垂直居中，可在后面接between等覆盖水平居中;
  + between: space-between;
  + around: space-around;
  + column: 开启列布局;
  + little-space: 使所有直接子元素带有较小的左右外边距（5px），可以用在center和start以及end的时候，避免元素挤到一块;
  + wrap: 开启换行，flex元素默认不换行，会无限挤压;
+ other
  + top-layer: 使元素处于所有定位元素的最顶级, 当Message未消失就弹出模态框时会用到, 避免Message被模态框遮罩掩盖;
  + search-bar: 搜索框的样式, 长度350px;


# Utils
+ `generateID`: 生成一个随机id字符串;
+ `pipe`: 给定一个输入, 由给定的函数依次输出并作为输入传递到下一个函数直至返回;
+ `debounce`: 函数防抖/节流;
+ `statusMap`: 根据状态字符串获取对应的`<el-tag>`type值以及颜色和状态中文名;
+ `isNormal`: 判断一个状态是否属于正常的状态;
+ `isAbnormal`: 判断一个状态是否属于不正常的状态;
+ `isOffline`: 判断一个状态是否属于离线状态;
+ `fillBaseTime`: 将提供的时间数据填充进日期对象;
+ `getDefaultDatetimePickerRanger`: 用于默认的时间范围, 若提供的开始时间晚于当前时间则将开始日期提前一天;
+ `oeeProgressStatus`: 根据oee返回对应的状态;
+ `oeeProgressColor`: 根据oee返回对应的颜色值;
+ `echartStyle`: 一个对象， 用于获取全局的echart样式;
+ `deepClone`: 深拷贝一个对象, 支持递归引用和Symbol属性;
+ `deepMerge`: 深度合并2个对象，返回第一个传入的对象;
+ `assert`: 断言一个表达式, 若为falsy值则抛出错误停止js执行;
+ `sleep`: 传入一个毫秒数，使当前异步函数非阻塞等待该毫秒数的时间;
+ `formatMilliseconds`: 待补充;
+ `formatDate`: 格式化日期;
+ `formatTime`: 格式化时间;
+ `formatDateTime`: 格式化日期+时间;
+ `leftFill0`: 将指定数字转换为指定长度的字符串并左补0;
+ `listContainsOr`: 只要传入第一个数组中含有后面传入的所有参数中的一项就返回true;
+ `listContainsAnd`: 当第二个以及之后的所有参数都包含在第一个参数中时，返回true;
+ `weekMap`: 一个对象，根据数字得到中文;
+ `getClock`: 获取当前时间的格式化对象;
+ `regexPhone`: 验证一个字符串是否为标准的手机号码;
+ `timelineConfig`: 待补充;
+ `timesPieConfig`: 待补充;
+ `lineChartConfig`: 待补充;
+ `lineConfig`: 待补充;
+ `lineConfigOfTime`: 待补充;
+ `getColors`: 待补充;
+ `getColor`: 待补充;

# Pages
+ `index`: 空逻辑，用于编译错误消除;
+ `login`: 登录页;
+ `monitoring`: 待补充;
+ `monitorDetail`: 待补充;
+ `productOrderMonitor`: 待补充;
+ `parameter`: 待补充;
+ `paramsExport`: 待补充;
+ `oeeAnalysis`: 待补充;
+ `runTimeAnalysis`: 待补充;
+ `alarmAnalysis`: 待补充;
+ `alarmAnalysisMain`: 待补充;
+ `alarmAnalysisHistory`: 待补充;
+ `alarmAnalysisMapDevice`: 待补充;
+ `alarmAnalysisMapEmp`: 待补充;
+ `alarmAnalysisRate`: 待补充;
+ `productPartClockAnalysis`: 待补充;
+ `partNum`: 待补充;
+ `employeeAnalysis`: 待补充;
+ `qualityEff`: 待补充;
+ `qualityEffProduct`: 待补充;
+ `qualityEffDevice`: 待补充;
+ `qualityEffEmp`: 待补充;
+ `powerConsume`: 待补充;
+ `deviceMng`: 待补充;
+ `empMng`: 待补充;
+ `productPartConfig`: 待补充;
+ `partDeviceConfig`: 待补充;
+ `productOrderMng`: 待补充;
+ `produceSetting`: 待补充;
+ `alarmRuleSetting`: 待补充;
+ `analysisSetting`: 待补充;
+ `dashboardSetting`: 待补充;
+ `user-management`: 待补充;
+ `roleMng`: 待补充;
+ `planQuantityManual`: 待补充;
+ `quantityManual`: 待补充;
+ `qualityManual`: 待补充;
+ `storeManual`: 待补充;
+ `displayDashboard`: 待补充;
